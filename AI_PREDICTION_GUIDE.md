# AI é¢„æµ‹è‡ªåŠ¨ç”ŸæˆæŒ‡å—

## åŠŸèƒ½è¯´æ˜

`generate_ai_prediction.py` è„šæœ¬å¯ä»¥è‡ªåŠ¨è°ƒç”¨å¤šä¸ª AI æ¨¡å‹ç”ŸæˆåŒè‰²çƒé¢„æµ‹æ•°æ®ï¼Œå¹¶ä¿å­˜åˆ° `data/ai_predictions.json`ã€‚

## å‰ç½®è¦æ±‚

### 1. å®‰è£…ä¾èµ–

```bash
pip install openai
```

### 2. é…ç½® API

ç¼–è¾‘ `generate_ai_prediction.py` æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```python
# API é…ç½®
BASE_URL = "https://aihubmix.com/v1"  # ä¿®æ”¹ä¸ºä½ çš„ API endpoint
API_KEY = "sk-xxx"  # ä¿®æ”¹ä¸ºä½ çš„ API key

# æ¨¡å‹é…ç½®
MODELS = [
    {"id": "gpt-4o", "name": "GPT-5", "model_id": "SSB-Team-001"},
    {"id": "claude-3-5-sonnet-20241022", "name": "Claude 4.5", "model_id": "team_alpha_arena_v1"},
    {"id": "gemini-2.0-flash-exp", "name": "Gemini 2.5", "model_id": "Gemini2.5"},
    {"id": "deepseek-chat", "name": "DeepSeek R1", "model_id": "DeepseekR1"}
]
```

## ä½¿ç”¨æ–¹æ³•

### è¿è¡Œè„šæœ¬

```bash
python3 generate_ai_prediction.py
```

### æ‰§è¡Œæµç¨‹

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

1. **åŠ è½½å†å²æ•°æ®** - ä» `data/lottery_history.json` è¯»å–æœ€è¿‘ 30 æœŸå¼€å¥–æ•°æ®
2. **è·å–ä¸‹æœŸä¿¡æ¯** - ä» `next_draw` å­—æ®µè·å–é¢„æµ‹ç›®æ ‡æœŸå·å’Œæ—¥æœŸ
3. **è°ƒç”¨ AI æ¨¡å‹** - é€ä¸ªè°ƒç”¨é…ç½®çš„ AI æ¨¡å‹ç”Ÿæˆé¢„æµ‹
4. **éªŒè¯é¢„æµ‹æ•°æ®** - æ£€æŸ¥è¿”å›çš„ JSON æ ¼å¼æ˜¯å¦æ­£ç¡®
5. **åˆ›å»ºå¤‡ä»½** - å¤‡ä»½ç°æœ‰çš„ `ai_predictions.json`
6. **ä¿å­˜é¢„æµ‹** - å°†æ–°é¢„æµ‹ä¿å­˜åˆ° `data/ai_predictions.json`

### è¾“å‡ºç¤ºä¾‹

```
==================================================
ğŸ¤– åŒè‰²çƒ AI é¢„æµ‹è‡ªåŠ¨ç”Ÿæˆ
==================================================

ğŸ“Š åŠ è½½å†å²å¼€å¥–æ•°æ®...
ğŸ¯ ç›®æ ‡æœŸå·: 25124
ğŸ“… å¼€å¥–æ—¥æœŸ: 2025å¹´10æœˆ28æ—¥
ğŸ“ å†å²æ•°æ®: æœ€è¿‘ 33 æœŸ

ğŸ”® å¼€å§‹ç”Ÿæˆé¢„æµ‹...

  â³ æ­£åœ¨è°ƒç”¨ GPT-5 æ¨¡å‹...
  âœ… GPT-5 é¢„æµ‹æˆåŠŸ
  âœ“ éªŒè¯é€šè¿‡

  â³ æ­£åœ¨è°ƒç”¨ Claude 4.5 æ¨¡å‹...
  âœ… Claude 4.5 é¢„æµ‹æˆåŠŸ
  âœ“ éªŒè¯é€šè¿‡

  â³ æ­£åœ¨è°ƒç”¨ Gemini 2.5 æ¨¡å‹...
  âœ… Gemini 2.5 é¢„æµ‹æˆåŠŸ
  âœ“ éªŒè¯é€šè¿‡

  â³ æ­£åœ¨è°ƒç”¨ DeepSeek R1 æ¨¡å‹...
  âœ… DeepSeek R1 é¢„æµ‹æˆåŠŸ
  âœ“ éªŒè¯é€šè¿‡

âœ… æˆåŠŸç”Ÿæˆ 4/4 ä¸ªæ¨¡å‹çš„é¢„æµ‹

ğŸ’¾ ä¿å­˜é¢„æµ‹æ•°æ®...
  âœ“ å·²åˆ›å»ºå¤‡ä»½: ai_predictions_backup_20251027_152701.json
  âœ“ å·²ä¿å­˜åˆ°: data/ai_predictions.json

==================================================
ğŸ‰ é¢„æµ‹ç”Ÿæˆå®Œæˆï¼
==================================================
```

## ç”Ÿæˆçš„æ•°æ®æ ¼å¼

```json
{
  "prediction_date": "2025-10-27",
  "target_period": "25124",
  "models": [
    {
      "prediction_date": "2025-10-27",
      "target_period": "25124",
      "model_id": "SSB-Team-001",
      "model_name": "GPT-5",
      "predictions": [
        {
          "group_id": 1,
          "strategy": "çƒ­å·è¿½éšè€…",
          "red_balls": ["09", "16", "17", "24", "25", "31"],
          "blue_ball": "13",
          "description": "é€‰æ‹©æœ€è¿‘é«˜é¢‘å·ç ï¼Œæ’é™¤ä¸Šä¸€æœŸå·ç "
        }
        // ... å…± 5 ç»„é¢„æµ‹
      ]
    }
    // ... å…± 4 ä¸ªæ¨¡å‹
  ]
}
```

## é¢„æµ‹ç­–ç•¥è¯´æ˜

æ¯ä¸ª AI æ¨¡å‹ä¼šç”Ÿæˆ 5 ç»„é¢„æµ‹ï¼Œåˆ†åˆ«é‡‡ç”¨ä¸åŒç­–ç•¥ï¼š

1. **çƒ­å·è¿½éšè€…** - é€‰æ‹©æœ€è¿‘ 30 æœŸé«˜é¢‘å·ç ï¼ˆæ’é™¤ä¸Šä¸€æœŸï¼‰
2. **å†·å·é€†å‘è€…** - é€‰æ‹©æœ€è¿‘ 30 æœŸä½é¢‘å·ç ï¼ˆå¥‡å¶æ¯” 3:3ï¼‰
3. **å¹³è¡¡ç­–ç•¥å¸ˆ** - å¤šç»´åº¦å¹³è¡¡ï¼ˆå¥‡å¶/å¤§å°/å’Œå€¼/è¿å·ï¼‰
4. **å‘¨æœŸç†è®ºå®¶** - çŸ­æœŸé¢‘ç‡ä¸Šç©¿é•¿æœŸé¢‘ç‡çš„å·ç 
5. **ç»¼åˆå†³ç­–è€…** - èåˆä»¥ä¸Šæ‰€æœ‰ç­–ç•¥

## æ•°æ®éªŒè¯

è„šæœ¬ä¼šè‡ªåŠ¨éªŒè¯ç”Ÿæˆçš„é¢„æµ‹æ•°æ®ï¼š

- âœ“ å¿…éœ€å­—æ®µå®Œæ•´æ€§ï¼ˆprediction_date, target_period, model_id, model_name, predictionsï¼‰
- âœ“ é¢„æµ‹ç»„æ•°é‡æ­£ç¡®ï¼ˆ5 ç»„ï¼‰
- âœ“ çº¢çƒæ•°é‡æ­£ç¡®ï¼ˆ6 ä¸ªï¼‰
- âœ“ çº¢çƒå·ç å·²æ’åº
- âœ“ è“çƒä¸ä¸ºç©º

## æ³¨æ„äº‹é¡¹

### 1. API è°ƒç”¨é™åˆ¶

- è„šæœ¬ä¼šä¾æ¬¡è°ƒç”¨ 4 ä¸ªæ¨¡å‹ï¼Œè¯·ç¡®ä¿ API æœ‰è¶³å¤Ÿçš„è°ƒç”¨é…é¢
- æ¯æ¬¡è°ƒç”¨çš„ timeout è®¾ç½®ä¸º 180 ç§’ï¼ˆ3 åˆ†é’Ÿï¼‰
- å¦‚æœæŸä¸ªæ¨¡å‹è°ƒç”¨å¤±è´¥ï¼Œä¼šè·³è¿‡è¯¥æ¨¡å‹ç»§ç»­æ‰§è¡Œ

### 2. æ•°æ®å¤‡ä»½

- æ¯æ¬¡è¿è¡Œè„šæœ¬éƒ½ä¼šåˆ›å»ºå¤‡ä»½æ–‡ä»¶
- å¤‡ä»½æ–‡ä»¶å‘½åæ ¼å¼ï¼š`ai_predictions_backup_YYYYMMDD_HHMMSS.json`
- å¤‡ä»½æ–‡ä»¶ä¸åŸæ–‡ä»¶åœ¨åŒä¸€ç›®å½•

### 3. Prompt ä¼˜åŒ–

- Prompt æ¨¡æ¿ä½äºè„šæœ¬ä¸­çš„ `PROMPT_TEMPLATE` å¸¸é‡
- å¯æ ¹æ®éœ€è¦ä¿®æ”¹ç­–ç•¥è¯´æ˜å’Œè¦æ±‚
- å‚è€ƒæ–‡æ¡£ï¼š`doc/prompt.md`

### 4. æ¨¡å‹é…ç½®

å¦‚éœ€æ·»åŠ /ä¿®æ”¹æ¨¡å‹ï¼š

```python
MODELS = [
    {
        "id": "æ¨¡å‹ API ID",           # API è°ƒç”¨æ—¶ä½¿ç”¨çš„æ¨¡å‹ ID
        "name": "æ˜¾ç¤ºåç§°",            # å‰ç«¯æ˜¾ç¤ºçš„æ¨¡å‹åç§°
        "model_id": "æ•°æ®æ ‡è¯†"         # JSON ä¸­çš„ model_id å­—æ®µ
    }
]
```

## ä¸ç°æœ‰å·¥ä½œæµé›†æˆ

### è‡ªåŠ¨åŒ–æµç¨‹å»ºè®®

1. **è‡ªåŠ¨æ›´æ–°å†å²æ•°æ®**
   ```bash
   cd fetch_history
   python3 fetch_lottery_history.py
   ```

2. **ç”Ÿæˆæ–°é¢„æµ‹**
   ```bash
   python3 generate_ai_prediction.py
   ```

3. **æäº¤æ›´æ”¹**
   ```bash
   git add data/lottery_history.json data/ai_predictions.json
   git commit -m "chore: update lottery data and AI predictions"
   git push
   ```

### GitHub Actions é›†æˆç¤ºä¾‹

```yaml
name: Update Predictions

on:
  schedule:
    - cron: '0 15 * * 0,2,4'  # å‘¨æ—¥ã€å‘¨äºŒã€å‘¨å›› 23:00 åŒ—äº¬æ—¶é—´

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: |
          pip install requests beautifulsoup4 openai

      - name: Update lottery history
        run: |
          cd fetch_history
          python3 fetch_lottery_history.py

      - name: Generate AI predictions
        run: python3 generate_ai_prediction.py
        env:
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}

      - name: Commit changes
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git add data/
          git commit -m "chore: auto-update predictions" || exit 0
          git push
```

## æ•…éšœæ’æŸ¥

### é—®é¢˜ï¼šJSON è§£æå¤±è´¥

**åŸå› **ï¼šAI è¿”å›çš„å†…å®¹åŒ…å«é¢å¤–çš„è¯´æ˜æ–‡å­—

**è§£å†³**ï¼š
- è„šæœ¬å·²è‡ªåŠ¨å¤„ç† ```json æ ‡è®°
- å¦‚ä»æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ Prompt æ˜¯å¦å¼ºè°ƒ"åªè¿”å› JSON"
- å¯è°ƒæ•´ `extract_json_from_response` å‡½æ•°

### é—®é¢˜ï¼šéªŒè¯å¤±è´¥

**åŸå› **ï¼šè¿”å›çš„æ•°æ®æ ¼å¼ä¸ç¬¦åˆè¦æ±‚

**è§£å†³**ï¼š
- æŸ¥çœ‹é”™è¯¯æç¤ºçš„å…·ä½“å­—æ®µ
- æ£€æŸ¥çº¢çƒæ˜¯å¦æ’åºã€æ•°é‡æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ‰€æœ‰å¿…éœ€å­—æ®µæ˜¯å¦å­˜åœ¨

### é—®é¢˜ï¼šAPI è°ƒç”¨è¶…æ—¶

**åŸå› **ï¼šç½‘ç»œå»¶è¿Ÿæˆ–æ¨¡å‹å“åº”æ…¢

**è§£å†³**ï¼š
- å¢åŠ  timeout å‚æ•°ï¼ˆé»˜è®¤ 180 ç§’ï¼‰
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- åˆ†æ‰¹è¿è¡Œï¼ˆæ³¨é‡Šæ‰éƒ¨åˆ†æ¨¡å‹ï¼‰

## ç›¸å…³æ–‡ä»¶

- `generate_ai_prediction.py` - ä¸»è„šæœ¬
- `doc/prompt.md` - Prompt æ¨¡æ¿æ–‡æ¡£
- `data/lottery_history.json` - å†å²å¼€å¥–æ•°æ®ï¼ˆè¾“å…¥ï¼‰
- `data/ai_predictions.json` - AI é¢„æµ‹æ•°æ®ï¼ˆè¾“å‡ºï¼‰

## è®¸å¯è¯

æœ¬è„šæœ¬ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚
